"use strict";const $form=document.querySelector(".js-add-note-form"),$fileInput=document.querySelector(".js-image-input"),$imagePlaceholder=document.querySelector(".js-image-placeholder"),$successMessage=document.querySelector(".js-success-message"),$errorMessage=document.querySelector(".js-error-message"),$inputs={title:document.querySelector("#title"),content:document.querySelector("#content")},baseUrl="http://localhost:3000/notes",isValid=()=>""!==$inputs.title.value&&""!==$inputs.content.value,getNoteId=()=>location.pathname.split("/notes/edit/")[1],submitForm=e=>{if(e.preventDefault(),isValid()){const e=new FormData($form);fetch(baseUrl+"/"+getNoteId(),{method:"POST",body:e}).then(()=>{$form.classList.add("is-hidden"),$successMessage.classList.remove("is-hidden")}).catch(e=>{console.log(e),$form.classList.add("is-hidden"),$errorMessage.classList.remove("is-hidden")})}},fileChange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=(e=>{$imagePlaceholder.getAttribute("src").length&&$imagePlaceholder.setAttribute("src",e.target.result)}),e.readAsDataURL(t)}},init=()=>{$form.addEventListener("submit",submitForm,!1),$fileInput.addEventListener("change",fileChange,!1)};document.addEventListener("DOMContentLoaded",init,!1);